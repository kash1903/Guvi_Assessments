<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagination Task</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-4">
    <!-- required elements -->
    <h1 id="title" class="text-center">Pagination Task</h1>
    <p id="description" class="text-center">This is a simple pagination demo.</p>

    <!-- table wrapper -->
    <div class="table-responsive"></div>

    <!-- buttons wrapper -->
    <div id="buttons" class="d-flex justify-content-center mt-3"></div>
  </div>

<script>
// create table structure
const tableBox = document.querySelector(".table-responsive");
const table = document.createElement("table");
table.className = "table table-bordered";
table.innerHTML = `
  <thead>
    <tr><th>ID</th><th>Name</th><th>Email</th></tr>
  </thead>
  <tbody id="table-body"></tbody>
`;
tableBox.appendChild(table);

// variables for pagination
let data = [];
let page = 1;
const rows = 10;

// fetch data
fetch("data.json")
  .then(r => r.json())
  .then(json => {
    data = json;
    showPage(page);
  });

// function to display rows
function showPage(p) {
  const tbody = document.getElementById("table-body");
  tbody.innerHTML = "";
  let start = (p - 1) * rows;
  let end = start + rows;
  let items = data.slice(start, end);

  items.forEach(item => {
    let tr = document.createElement("tr");
    tr.innerHTML = `<td>${item.id}</td><td>${item.name}</td><td>${item.email}</td>`;
    tbody.appendChild(tr);
  });

  showButtons();
}

// function to display pagination buttons
function showButtons() {
  const btnBox = document.getElementById("buttons");
  btnBox.innerHTML = "";
  let totalPages = Math.ceil(data.length / rows);

  // first + prev
  btnBox.appendChild(makeBtn("First", () => go(1), page === 1));
  btnBox.appendChild(makeBtn("Previous", () => go(page - 1), page === 1));

  // page numbers
  for (let i = 1; i <= totalPages; i++) {
    btnBox.appendChild(makeBtn(i, () => go(i), false, i === page));
  }

  // next + last
  btnBox.appendChild(makeBtn("Next", () => go(page + 1), page === totalPages));
  btnBox.appendChild(makeBtn("Last", () => go(totalPages), page === totalPages));
}

// helper to make a button
function makeBtn(text, fn, disable=false, active=false) {
  let btn = document.createElement("button");
  btn.className = "btn mx-1 " + (active ? "btn-primary" : "btn-light");
  btn.textContent = text;
  btn.disabled = disable;
  btn.onclick = fn;
  return btn;
}

// change page
function go(p) {
  let totalPages = Math.ceil(data.length / rows);
  if (p < 1 || p > totalPages) return;
  page = p;
  showPage(page);
}
</script>

<!-- required test suite -->
<script src="https://app.zenclass.in/sheets/v1/js/zen/suite/bundle.js"></script>
</body>
</html>
